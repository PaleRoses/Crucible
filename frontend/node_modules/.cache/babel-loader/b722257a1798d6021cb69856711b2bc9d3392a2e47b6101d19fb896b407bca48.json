{"ast":null,"code":"var _jsxFileName = \"/home/valeria/Documents/Crucible/frontend/src/components/core/Background.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\n\n/**\n * StellarBackground Component - Enterprise Performance Optimized Version\n * \n * Creates a highly performant animated background with stars, constellations,\n * and subtle vertex effects that gives the impression of flowing through space.\n * \n * Features:\n * - Advanced performance optimizations with adaptive rendering\n * - Smooth, fluid animations with zero jitter\n * - Memory and battery-efficient rendering pipeline\n * - Accessibility compliance with reduced motion support\n * - Supports hardware acceleration and high-DPI displays\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StellarBackground = ({\n  // Configuration options\n  zIndex = -1,\n  active = true,\n  starCount = 150,\n  starMinSize = 0.5,\n  starMaxSize = 2.5,\n  starMinOpacity = 0.2,\n  starMaxOpacity = 0.8,\n  constellationCount = 8,\n  constellationDensity = 0.3,\n  constellationLineOpacity = 0.15,\n  constellationLineColor = 'rgba(160, 142, 97, 0.4)',\n  coreStarColor = 'rgba(255, 253, 227, 1)',\n  glowStarColor = 'rgba(191, 173, 127, 0.6)',\n  vertexEffectIntensity = 0.5,\n  backgroundMotionSpeed = 0.0005,\n  starPulseDuration = 3000,\n  stellarDriftSpeed = 0.02,\n  adaptiveQuality = true,\n  respectReducedMotion = true,\n  debugMode = false\n}) => {\n  _s();\n  // Refs for DOM elements and animation state\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const ctxRef = useRef(null);\n  const starsRef = useRef([]);\n  const constellationsRef = useRef([]);\n  const animationFrameRef = useRef(null);\n  const lastFrameTimeRef = useRef(0);\n  const timeScaleRef = useRef(1);\n  const resizeObserverRef = useRef(null);\n  const isVisibleRef = useRef(true);\n  const deviceCapabilitiesRef = useRef({\n    isHighPerformance: true,\n    isMobile: false,\n    pixelRatio: 1\n  });\n\n  // Component state\n  const [dimensions, setDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  const [initialized, setInitialized] = useState(false);\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n  const [qualityFactor, setQualityFactor] = useState(1);\n\n  // Pre-calculate color variants to avoid string operations during animation\n  const colorCacheRef = useRef(new Map());\n\n  // Adaptive settings based on quality factor and device capabilities\n  const adaptedSettings = useMemo(() => {\n    if (!adaptiveQuality || qualityFactor === 1) {\n      return {\n        starCount,\n        starMinSize,\n        starMaxSize,\n        constellationCount,\n        useGlow: true,\n        useHighQualityRendering: true\n      };\n    }\n\n    // Adjust quality-dependent parameters\n    return {\n      starCount: Math.max(50, Math.floor(starCount * qualityFactor)),\n      starMinSize: Math.max(0.3, starMinSize * qualityFactor),\n      starMaxSize: Math.max(1, starMaxSize * qualityFactor),\n      constellationCount: Math.max(3, Math.floor(constellationCount * qualityFactor)),\n      useGlow: qualityFactor > 0.5,\n      useHighQualityRendering: qualityFactor > 0.7\n    };\n  }, [adaptiveQuality, qualityFactor, starCount, starMinSize, starMaxSize, constellationCount]);\n\n  // Get cached color with opacity\n  const getCachedColor = useCallback((baseColor, opacity) => {\n    // Ensure opacity is always valid\n    const safeOpacity = Math.max(0, Math.min(1, opacity || 0));\n\n    // Round opacity to reduce cache size while maintaining visual quality\n    const roundedOpacity = Math.round(safeOpacity * 100) / 100;\n    const key = `${baseColor}-${roundedOpacity}`;\n    if (!colorCacheRef.current.has(key)) {\n      const newColor = baseColor.replace(/[\\d.]+\\)$/, roundedOpacity + ')');\n      colorCacheRef.current.set(key, newColor);\n    }\n    return colorCacheRef.current.get(key);\n  }, []);\n\n  // Detect device capabilities and set quality\n  const detectCapabilities = useCallback(() => {\n    var _navigator, _navigator2, _navigator3, _window;\n    // Device memory, hardware concurrency, and screen\n    const memory = ((_navigator = navigator) === null || _navigator === void 0 ? void 0 : _navigator.deviceMemory) || 4;\n    const cores = ((_navigator2 = navigator) === null || _navigator2 === void 0 ? void 0 : _navigator2.hardwareConcurrency) || 4;\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(((_navigator3 = navigator) === null || _navigator3 === void 0 ? void 0 : _navigator3.userAgent) || '');\n    const pixelRatio = ((_window = window) === null || _window === void 0 ? void 0 : _window.devicePixelRatio) || 1;\n\n    // Update device capabilities\n    deviceCapabilitiesRef.current = {\n      isHighPerformance: memory > 4 && cores > 4 && !isMobile,\n      isMobile,\n      pixelRatio: Math.min(pixelRatio, isMobile ? 2 : 3) // Cap pixel ratio to avoid excessive rendering\n    };\n\n    // Calculate quality factor based on capabilities\n    if (adaptiveQuality) {\n      // Base score from hardware\n      const performanceScore = memory * cores / (isMobile ? 2 : 1);\n\n      // Scale quality based on performance score\n      let quality = 1;\n      if (performanceScore > 16) {\n        quality = 1; // High-end devices\n      } else if (performanceScore > 8) {\n        quality = 0.8; // Mid-range devices\n      } else if (performanceScore > 4) {\n        quality = 0.6; // Low-end devices\n      } else {\n        quality = 0.4; // Very low-end devices\n      }\n      setQualityFactor(quality);\n    }\n  }, [adaptiveQuality]);\n\n  // Detect reduced motion preference\n  useEffect(() => {\n    const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setPrefersReducedMotion(reducedMotionQuery.matches);\n    const handleReducedMotionChange = e => {\n      setPrefersReducedMotion(e.matches);\n    };\n    reducedMotionQuery.addEventListener('change', handleReducedMotionChange);\n\n    // Detect device capabilities\n    detectCapabilities();\n\n    // Setup visibility change detection\n    const handleVisibilityChange = () => {\n      isVisibleRef.current = !document.hidden;\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      reducedMotionQuery.removeEventListener('change', handleReducedMotionChange);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [detectCapabilities]);\n\n  // Initialize canvas with proper resolution\n  const setupCanvas = useCallback(() => {\n    if (!canvasRef.current || !containerRef.current) return false;\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    const rect = container.getBoundingClientRect();\n    const pixelRatio = deviceCapabilitiesRef.current.pixelRatio;\n\n    // Set canvas size accounting for pixel ratio\n    const displayWidth = Math.floor(rect.width);\n    const displayHeight = Math.floor(rect.height);\n    canvas.width = displayWidth * pixelRatio;\n    canvas.height = displayHeight * pixelRatio;\n\n    // Set CSS display size\n    canvas.style.width = `${displayWidth}px`;\n    canvas.style.height = `${displayHeight}px`;\n\n    // Get 2D context\n    const ctx = canvas.getContext('2d', {\n      alpha: true,\n      desynchronized: true,\n      willReadFrequently: false\n    });\n    if (!ctx) return false;\n\n    // Scale context for high-DPI displays\n    ctx.scale(pixelRatio, pixelRatio);\n\n    // Configure context for high-quality rendering\n    if (adaptedSettings.useHighQualityRendering) {\n      ctx.imageSmoothingEnabled = true;\n      ctx.imageSmoothingQuality = 'high';\n    }\n    ctxRef.current = ctx;\n\n    // Update dimensions state\n    setDimensions({\n      width: displayWidth,\n      height: displayHeight\n    });\n    return true;\n  }, [adaptedSettings.useHighQualityRendering]);\n\n  // Initialize star field\n  const initializeStars = useCallback(() => {\n    const {\n      width,\n      height\n    } = dimensions;\n    if (!width || !height) return;\n    const stars = [];\n\n    // Create stars\n    for (let i = 0; i < adaptedSettings.starCount; i++) {\n      const x = Math.random() * width;\n      const y = Math.random() * height;\n      const size = Math.random() * (adaptedSettings.starMaxSize - adaptedSettings.starMinSize) + adaptedSettings.starMinSize;\n      const opacity = Math.random() * (starMaxOpacity - starMinOpacity) + starMinOpacity;\n      const pulseSpeed = Math.random() * 0.0007 + 0.0003;\n      const pulsePhase = Math.random() * Math.PI * 2;\n\n      // Add drift motion\n      const driftX = (Math.random() - 0.5) * stellarDriftSpeed;\n      const driftY = (Math.random() - 0.5) * stellarDriftSpeed;\n\n      // Add z-depth for parallax effect\n      const zDepth = Math.random() * 0.8 + 0.2; // 0.2 to 1.0\n\n      stars.push({\n        x,\n        y,\n        size,\n        opacity,\n        pulseSpeed,\n        pulsePhase,\n        driftX,\n        driftY,\n        zDepth,\n        originalX: x,\n        originalY: y,\n        // Pre-allocate current properties to avoid layout thrashing\n        currentSize: size,\n        currentOpacity: opacity\n      });\n    }\n    starsRef.current = stars;\n\n    // Create constellations\n    initializeConstellations(stars);\n  }, [dimensions, adaptedSettings.starCount, adaptedSettings.starMinSize, adaptedSettings.starMaxSize, starMinOpacity, starMaxOpacity, stellarDriftSpeed]);\n\n  // Initialize constellations based on stars\n  const initializeConstellations = useCallback(stars => {\n    const constellations = [];\n    const {\n      width,\n      height\n    } = dimensions;\n\n    // Get a subset of stars to use for constellations\n    const constellationStars = [...stars].sort(() => Math.random() - 0.5).slice(0, Math.floor(stars.length * constellationDensity));\n\n    // Create constellations\n    for (let i = 0; i < adaptedSettings.constellationCount; i++) {\n      // Select random stars for this constellation\n      const starCount = Math.floor(Math.random() * 6) + 3; // 3-8 stars per constellation\n      const constellationPoints = [];\n\n      // Get random starting point\n      const startIndex = Math.floor(Math.random() * constellationStars.length);\n      let currentStarIndex = startIndex;\n\n      // Add the first star\n      const firstStar = constellationStars[currentStarIndex];\n      constellationPoints.push({\n        x: firstStar.x,\n        y: firstStar.y,\n        starRef: firstStar\n      });\n\n      // Add connections by finding stars that are reasonably close\n      for (let j = 1; j < starCount; j++) {\n        const currentStar = constellationStars[currentStarIndex];\n\n        // Find nearby stars\n        const nearbyStars = constellationStars.filter((star, index) => {\n          if (index === currentStarIndex) return false; // Skip current star\n\n          // Check if star is already in constellation\n          const isAlreadyIncluded = constellationPoints.some(point => point.starRef === star);\n          if (isAlreadyIncluded) return false;\n\n          // Calculate distance\n          const dx = star.x - currentStar.x;\n          const dy = star.y - currentStar.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n\n          // Find stars within a reasonable distance\n          const maxDistance = Math.min(width, height) * 0.2;\n          return distance < maxDistance;\n        });\n\n        // If no nearby stars, break constellation here\n        if (nearbyStars.length === 0) break;\n\n        // Choose a random nearby star\n        const nextStar = nearbyStars[Math.floor(Math.random() * nearbyStars.length)];\n        const nextStarIndex = constellationStars.indexOf(nextStar);\n\n        // Add to constellation\n        constellationPoints.push({\n          x: nextStar.x,\n          y: nextStar.y,\n          starRef: nextStar\n        });\n\n        // Update current star\n        currentStarIndex = nextStarIndex;\n      }\n\n      // Only add constellations with enough points\n      if (constellationPoints.length >= 3) {\n        // Calculate center of constellation for rotation\n        const centerX = constellationPoints.reduce((sum, p) => sum + p.x, 0) / constellationPoints.length;\n        const centerY = constellationPoints.reduce((sum, p) => sum + p.y, 0) / constellationPoints.length;\n        constellations.push({\n          points: constellationPoints,\n          opacity: Math.random() * 0.1 + constellationLineOpacity - 0.1,\n          rotation: (Math.random() * 0.0002 - 0.0001) * (Math.random() < 0.5 ? -1 : 1),\n          // Random direction\n          rotationCenter: {\n            x: centerX,\n            y: centerY\n          },\n          // Pre-allocate current property to avoid layout thrashing\n          currentOpacity: constellationLineOpacity\n        });\n      }\n    }\n    constellationsRef.current = constellations;\n  }, [adaptedSettings.constellationCount, constellationDensity, constellationLineOpacity, dimensions]);\n\n  // Update stars and constellations on resize\n  useEffect(() => {\n    if (!dimensions.width || !dimensions.height) return;\n\n    // Initialize stars and constellations\n    initializeStars();\n\n    // Mark component as initialized\n    setInitialized(true);\n  }, [dimensions, initializeStars]);\n\n  // Setup canvas resize observer\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Create a ResizeObserver to detect container size changes\n    const resizeObserver = new ResizeObserver(entries => {\n      var _resizeObserverRef$cu;\n      // Debounce resize operations\n      if ((_resizeObserverRef$cu = resizeObserverRef.current) !== null && _resizeObserverRef$cu !== void 0 && _resizeObserverRef$cu.timeout) {\n        clearTimeout(resizeObserverRef.current.timeout);\n      }\n      resizeObserverRef.current = {\n        ...resizeObserverRef.current,\n        timeout: setTimeout(() => {\n          setupCanvas();\n        }, 200) // 200ms debounce\n      };\n    });\n\n    // Capture current reference to avoid closure issues in cleanup\n    const currentContainer = containerRef.current;\n\n    // Start observing the container\n    resizeObserver.observe(currentContainer);\n    resizeObserverRef.current = {\n      ...resizeObserverRef.current,\n      observer: resizeObserver\n    };\n\n    // Initial setup\n    setupCanvas();\n    return () => {\n      var _resizeObserverRef$cu2, _resizeObserverRef$cu3;\n      if ((_resizeObserverRef$cu2 = resizeObserverRef.current) !== null && _resizeObserverRef$cu2 !== void 0 && _resizeObserverRef$cu2.observer) {\n        resizeObserverRef.current.observer.disconnect();\n      }\n      if ((_resizeObserverRef$cu3 = resizeObserverRef.current) !== null && _resizeObserverRef$cu3 !== void 0 && _resizeObserverRef$cu3.timeout) {\n        clearTimeout(resizeObserverRef.current.timeout);\n      }\n    };\n  }, [setupCanvas]);\n\n  // Update star positions and properties\n  const updateStars = useCallback((deltaTime, timestamp) => {\n    const {\n      width,\n      height\n    } = dimensions;\n\n    // Calculate global drift based on time\n    const globalOffsetX = Math.sin(timestamp * backgroundMotionSpeed) * width * 0.05;\n    const globalOffsetY = Math.cos(timestamp * backgroundMotionSpeed) * height * 0.05;\n\n    // Update each star\n    starsRef.current.forEach(star => {\n      // Apply global movement with parallax effect based on z-depth\n      const parallaxFactor = star.zDepth;\n\n      // Update position with smooth motion\n      star.x = star.originalX + globalOffsetX * parallaxFactor + Math.sin(timestamp * 0.0001 + star.pulsePhase) * 2;\n      star.y = star.originalY + globalOffsetY * parallaxFactor + Math.cos(timestamp * 0.0001 + star.pulsePhase) * 2;\n\n      // Wrap around edges (with buffer zone to prevent popping)\n      if (star.x < -20) star.x = width + 20;\n      if (star.x > width + 20) star.x = -20;\n      if (star.y < -20) star.y = height + 20;\n      if (star.y > height + 20) star.y = -20;\n\n      // Update pulse effect - use modulo to ensure continuous animation\n      const pulseTime = timestamp % starPulseDuration / starPulseDuration;\n      const pulseValue = Math.sin(pulseTime * Math.PI * 2 + star.pulsePhase);\n\n      // Apply subtle pulse to size and opacity\n      star.currentSize = star.size * (1 + pulseValue * 0.2);\n      star.currentOpacity = star.opacity * (0.8 + pulseValue * 0.2);\n    });\n  }, [dimensions, backgroundMotionSpeed, starPulseDuration]);\n\n  // Update constellation positions\n  const updateConstellations = useCallback((deltaTime, timestamp) => {\n    // Only update if we have constellations\n    if (constellationsRef.current.length === 0) return;\n\n    // Update each constellation\n    constellationsRef.current.forEach(constellation => {\n      // Apply rotation to each point around constellation center\n      const rotationAmount = constellation.rotation * deltaTime;\n      const centerX = constellation.rotationCenter.x;\n      const centerY = constellation.rotationCenter.y;\n\n      // Apply subtle unified movement to constellation center\n      const globalPhase = timestamp * 0.0001;\n      const centerDriftX = Math.sin(globalPhase + centerX * 0.01) * 2;\n      const centerDriftY = Math.cos(globalPhase + centerY * 0.01) * 2;\n      constellation.rotationCenter.x += centerDriftX * 0.01;\n      constellation.rotationCenter.y += centerDriftY * 0.01;\n\n      // Update constellation points based on their reference stars\n      constellation.points.forEach(point => {\n        // Get updated star position from reference\n        point.x = point.starRef.x;\n        point.y = point.starRef.y;\n\n        // Apply subtle rotation around constellation center\n        const dx = point.x - centerX;\n        const dy = point.y - centerY;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const angle = Math.atan2(dy, dx) + rotationAmount;\n\n        // Apply rotation with slight drift\n        point.x = centerX + Math.cos(angle) * distance + centerDriftX * 0.05;\n        point.y = centerY + Math.sin(angle) * distance + centerDriftY * 0.05;\n      });\n\n      // Apply subtle opacity variation based on time\n      constellation.currentOpacity = constellation.opacity * (0.8 + Math.sin(timestamp * 0.0005) * 0.2);\n    });\n  }, []);\n\n  // Render stars with optimized approach\n  const renderStars = useCallback((ctx, timestamp) => {\n    // Skip if context is not available\n    if (!ctx) return;\n\n    // Use high-quality or optimized rendering based on device capabilities\n    const useGlow = adaptedSettings.useGlow && !deviceCapabilitiesRef.current.isMobile;\n\n    // Draw each star\n    starsRef.current.forEach(star => {\n      ctx.beginPath();\n\n      // Apply glow effect for larger stars to create depth\n      if (useGlow && star.size > adaptedSettings.starMinSize + 0.5) {\n        ctx.shadowBlur = star.currentSize * 3;\n        ctx.shadowColor = getCachedColor(glowStarColor, star.currentOpacity * 0.8);\n      }\n\n      // Draw star core with gradient for more realistic appearance\n      const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.currentSize);\n      gradient.addColorStop(0, getCachedColor(coreStarColor, star.currentOpacity));\n      gradient.addColorStop(0.6, getCachedColor(coreStarColor, star.currentOpacity * 0.8));\n      gradient.addColorStop(1, getCachedColor(glowStarColor, star.currentOpacity * 0.3));\n      ctx.arc(star.x, star.y, star.currentSize, 0, Math.PI * 2);\n      ctx.fillStyle = gradient;\n      ctx.fill();\n\n      // Clear shadow settings to improve performance\n      if (useGlow && star.size > adaptedSettings.starMinSize + 0.5) {\n        ctx.shadowBlur = 0;\n        ctx.shadowColor = 'transparent';\n      }\n    });\n  }, [adaptedSettings.useGlow, adaptedSettings.starMinSize, getCachedColor, glowStarColor, coreStarColor]);\n\n  // Render constellations with optimized approach\n  const renderConstellations = useCallback((ctx, timestamp) => {\n    // Skip if context is not available\n    if (!ctx) return;\n\n    // Draw each constellation\n    constellationsRef.current.forEach(constellation => {\n      // Draw lines between stars\n      ctx.beginPath();\n\n      // Move to first point\n      const firstPoint = constellation.points[0];\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n\n      // Connect the dots with smooth lines\n      for (let i = 1; i < constellation.points.length; i++) {\n        const point = constellation.points[i];\n        ctx.lineTo(point.x, point.y);\n      }\n\n      // Set line style and draw with subtle gradient\n      const gradient = ctx.createLinearGradient(constellation.points[0].x, constellation.points[0].y, constellation.points[constellation.points.length - 1].x, constellation.points[constellation.points.length - 1].y);\n      gradient.addColorStop(0, getCachedColor(constellationLineColor, constellation.currentOpacity));\n      gradient.addColorStop(0.5, getCachedColor(constellationLineColor, constellation.currentOpacity * 1.2));\n      gradient.addColorStop(1, getCachedColor(constellationLineColor, constellation.currentOpacity));\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 0.7; // Thin lines\n      ctx.lineCap = 'round'; // Rounded ends for smoother appearance\n      ctx.stroke();\n\n      // Add subtle vertex effects at intersection points\n      if (vertexEffectIntensity > 0) {\n        constellation.points.forEach((point, index) => {\n          // Skip first and last points for better aesthetics\n          if (index === 0 || index === constellation.points.length - 1) return;\n\n          // Create subtle pulsing vertex glow\n          const vertexSize = 1.5 * vertexEffectIntensity;\n          const pulseOffset = Math.sin(timestamp * 0.001 + index) * 0.2 + 0.8;\n          ctx.beginPath();\n          ctx.arc(point.x, point.y, vertexSize * pulseOffset, 0, Math.PI * 2);\n\n          // Add subtle glow to vertices\n          if (adaptedSettings.useGlow) {\n            ctx.shadowBlur = vertexSize * 2;\n            ctx.shadowColor = getCachedColor(constellationLineColor, constellation.currentOpacity * 0.8);\n          }\n\n          // Fill vertex with slightly higher opacity\n          const vertexOpacity = Math.min(1, constellation.currentOpacity * 1.4);\n          ctx.fillStyle = getCachedColor(constellationLineColor, vertexOpacity);\n          ctx.fill();\n\n          // Clear shadow for performance\n          if (adaptedSettings.useGlow) {\n            ctx.shadowBlur = 0;\n            ctx.shadowColor = 'transparent';\n          }\n        });\n      }\n    });\n  }, [getCachedColor, constellationLineColor, vertexEffectIntensity, adaptedSettings.useGlow]);\n\n  // Main animation handler\n  const animateBackground = useCallback(timestamp => {\n    // Skip animation if component is hidden, inactive, or user prefers reduced motion\n    const shouldAnimate = isVisibleRef.current && active && !(respectReducedMotion && prefersReducedMotion);\n    if (!shouldAnimate) {\n      animationFrameRef.current = requestAnimationFrame(animateBackground);\n      return;\n    }\n\n    // Calculate delta time for smooth animation\n    const now = timestamp || performance.now();\n    const deltaTime = Math.min(now - lastFrameTimeRef.current, 50); // Cap delta time at 50ms\n    lastFrameTimeRef.current = now;\n\n    // Calculate time scale based on target frame rate\n    const targetDelta = 1000 / 60; // Target 60 FPS\n    const timeScale = deltaTime / targetDelta;\n    timeScaleRef.current = timeScale;\n\n    // Skip rendering if canvas context is not available\n    if (!ctxRef.current) {\n      animationFrameRef.current = requestAnimationFrame(animateBackground);\n      return;\n    }\n\n    // Clear canvas with high-performance clear method\n    ctxRef.current.clearRect(0, 0, dimensions.width, dimensions.height);\n\n    // Update positions\n    updateStars(deltaTime, now);\n    updateConstellations(deltaTime, now);\n\n    // Render everything\n    renderStars(ctxRef.current, now);\n    renderConstellations(ctxRef.current, now);\n\n    // Debug info\n    if (debugMode) {\n      const ctx = ctxRef.current;\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n      ctx.font = '12px monospace';\n      ctx.fillText(`Stars: ${starsRef.current.length}`, 10, 20);\n      ctx.fillText(`Constellations: ${constellationsRef.current.length}`, 10, 40);\n      ctx.fillText(`Quality: ${qualityFactor.toFixed(2)}`, 10, 60);\n      ctx.fillText(`Device: ${deviceCapabilitiesRef.current.isMobile ? 'Mobile' : 'Desktop'}`, 10, 80);\n      ctx.fillText(`FPS: ${Math.round(1000 / (deltaTime || 16))}`, 10, 100);\n    }\n\n    // Request next frame\n    animationFrameRef.current = requestAnimationFrame(animateBackground);\n  }, [active, respectReducedMotion, prefersReducedMotion, dimensions, updateStars, updateConstellations, renderStars, renderConstellations, debugMode, qualityFactor]);\n\n  // Start/stop animation loop\n  useEffect(() => {\n    if (!initialized || !dimensions.width || !dimensions.height) return;\n\n    // Reset timestamp for smooth animation restart\n    lastFrameTimeRef.current = 0;\n\n    // Start animation loop\n    animationFrameRef.current = requestAnimationFrame(animateBackground);\n\n    // Cleanup\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [initialized, dimensions, animateBackground]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      zIndex,\n      pointerEvents: 'none',\n      // Use hardware acceleration\n      willChange: 'transform',\n      transform: 'translateZ(0)',\n      backfaceVisibility: 'hidden'\n    },\n    \"aria-hidden\": \"true\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        // Hardware acceleration\n        willChange: 'transform',\n        transform: 'translateZ(0)',\n        backfaceVisibility: 'hidden'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 711,\n    columnNumber: 5\n  }, this);\n};\n_s(StellarBackground, \"sZpa05oueMV1wxWEBMTDrHs3nlw=\");\n_c = StellarBackground;\nexport default StellarBackground;\nvar _c;\n$RefreshReg$(_c, \"StellarBackground\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","useMemo","jsxDEV","_jsxDEV","StellarBackground","zIndex","active","starCount","starMinSize","starMaxSize","starMinOpacity","starMaxOpacity","constellationCount","constellationDensity","constellationLineOpacity","constellationLineColor","coreStarColor","glowStarColor","vertexEffectIntensity","backgroundMotionSpeed","starPulseDuration","stellarDriftSpeed","adaptiveQuality","respectReducedMotion","debugMode","_s","containerRef","canvasRef","ctxRef","starsRef","constellationsRef","animationFrameRef","lastFrameTimeRef","timeScaleRef","resizeObserverRef","isVisibleRef","deviceCapabilitiesRef","isHighPerformance","isMobile","pixelRatio","dimensions","setDimensions","width","height","initialized","setInitialized","prefersReducedMotion","setPrefersReducedMotion","qualityFactor","setQualityFactor","colorCacheRef","Map","adaptedSettings","useGlow","useHighQualityRendering","Math","max","floor","getCachedColor","baseColor","opacity","safeOpacity","min","roundedOpacity","round","key","current","has","newColor","replace","set","get","detectCapabilities","_navigator","_navigator2","_navigator3","_window","memory","navigator","deviceMemory","cores","hardwareConcurrency","test","userAgent","window","devicePixelRatio","performanceScore","quality","reducedMotionQuery","matchMedia","matches","handleReducedMotionChange","e","addEventListener","handleVisibilityChange","document","hidden","removeEventListener","setupCanvas","canvas","container","rect","getBoundingClientRect","displayWidth","displayHeight","style","ctx","getContext","alpha","desynchronized","willReadFrequently","scale","imageSmoothingEnabled","imageSmoothingQuality","initializeStars","stars","i","x","random","y","size","pulseSpeed","pulsePhase","PI","driftX","driftY","zDepth","push","originalX","originalY","currentSize","currentOpacity","initializeConstellations","constellations","constellationStars","sort","slice","length","constellationPoints","startIndex","currentStarIndex","firstStar","starRef","j","currentStar","nearbyStars","filter","star","index","isAlreadyIncluded","some","point","dx","dy","distance","sqrt","maxDistance","nextStar","nextStarIndex","indexOf","centerX","reduce","sum","p","centerY","points","rotation","rotationCenter","resizeObserver","ResizeObserver","entries","_resizeObserverRef$cu","timeout","clearTimeout","setTimeout","currentContainer","observe","observer","_resizeObserverRef$cu2","_resizeObserverRef$cu3","disconnect","updateStars","deltaTime","timestamp","globalOffsetX","sin","globalOffsetY","cos","forEach","parallaxFactor","pulseTime","pulseValue","updateConstellations","constellation","rotationAmount","globalPhase","centerDriftX","centerDriftY","angle","atan2","renderStars","beginPath","shadowBlur","shadowColor","gradient","createRadialGradient","addColorStop","arc","fillStyle","fill","renderConstellations","firstPoint","moveTo","lineTo","createLinearGradient","strokeStyle","lineWidth","lineCap","stroke","vertexSize","pulseOffset","vertexOpacity","animateBackground","shouldAnimate","requestAnimationFrame","now","performance","targetDelta","timeScale","clearRect","font","fillText","toFixed","cancelAnimationFrame","ref","position","top","left","overflow","pointerEvents","willChange","transform","backfaceVisibility","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/valeria/Documents/Crucible/frontend/src/components/core/Background.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\n\n/**\n * StellarBackground Component - Enterprise Performance Optimized Version\n * \n * Creates a highly performant animated background with stars, constellations,\n * and subtle vertex effects that gives the impression of flowing through space.\n * \n * Features:\n * - Advanced performance optimizations with adaptive rendering\n * - Smooth, fluid animations with zero jitter\n * - Memory and battery-efficient rendering pipeline\n * - Accessibility compliance with reduced motion support\n * - Supports hardware acceleration and high-DPI displays\n */\nconst StellarBackground = ({\n  // Configuration options\n  zIndex = -1,\n  active = true,\n  starCount = 150,\n  starMinSize = 0.5,\n  starMaxSize = 2.5,\n  starMinOpacity = 0.2,\n  starMaxOpacity = 0.8,\n  constellationCount = 8,\n  constellationDensity = 0.3,\n  constellationLineOpacity = 0.15,\n  constellationLineColor = 'rgba(160, 142, 97, 0.4)',\n  coreStarColor = 'rgba(255, 253, 227, 1)',\n  glowStarColor = 'rgba(191, 173, 127, 0.6)',\n  vertexEffectIntensity = 0.5,\n  backgroundMotionSpeed = 0.0005,\n  starPulseDuration = 3000,\n  stellarDriftSpeed = 0.02,\n  adaptiveQuality = true,\n  respectReducedMotion = true,\n  debugMode = false\n}) => {\n  // Refs for DOM elements and animation state\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n  const ctxRef = useRef(null);\n  const starsRef = useRef([]);\n  const constellationsRef = useRef([]);\n  const animationFrameRef = useRef(null);\n  const lastFrameTimeRef = useRef(0);\n  const timeScaleRef = useRef(1);\n  const resizeObserverRef = useRef(null);\n  const isVisibleRef = useRef(true);\n  const deviceCapabilitiesRef = useRef({\n    isHighPerformance: true,\n    isMobile: false,\n    pixelRatio: 1\n  });\n  \n  // Component state\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  const [initialized, setInitialized] = useState(false);\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n  const [qualityFactor, setQualityFactor] = useState(1);\n  \n  // Pre-calculate color variants to avoid string operations during animation\n  const colorCacheRef = useRef(new Map());\n  \n  // Adaptive settings based on quality factor and device capabilities\n  const adaptedSettings = useMemo(() => {\n    if (!adaptiveQuality || qualityFactor === 1) {\n      return {\n        starCount,\n        starMinSize,\n        starMaxSize,\n        constellationCount,\n        useGlow: true,\n        useHighQualityRendering: true\n      };\n    }\n    \n    // Adjust quality-dependent parameters\n    return {\n      starCount: Math.max(50, Math.floor(starCount * qualityFactor)),\n      starMinSize: Math.max(0.3, starMinSize * qualityFactor),\n      starMaxSize: Math.max(1, starMaxSize * qualityFactor),\n      constellationCount: Math.max(3, Math.floor(constellationCount * qualityFactor)),\n      useGlow: qualityFactor > 0.5,\n      useHighQualityRendering: qualityFactor > 0.7\n    };\n  }, [\n    adaptiveQuality,\n    qualityFactor,\n    starCount,\n    starMinSize,\n    starMaxSize,\n    constellationCount\n  ]);\n  \n  // Get cached color with opacity\n  const getCachedColor = useCallback((baseColor, opacity) => {\n    // Ensure opacity is always valid\n    const safeOpacity = Math.max(0, Math.min(1, opacity || 0));\n    \n    // Round opacity to reduce cache size while maintaining visual quality\n    const roundedOpacity = Math.round(safeOpacity * 100) / 100;\n    const key = `${baseColor}-${roundedOpacity}`;\n    \n    if (!colorCacheRef.current.has(key)) {\n      const newColor = baseColor.replace(/[\\d.]+\\)$/, roundedOpacity + ')');\n      colorCacheRef.current.set(key, newColor);\n    }\n    \n    return colorCacheRef.current.get(key);\n  }, []);\n  \n  // Detect device capabilities and set quality\n  const detectCapabilities = useCallback(() => {\n    // Device memory, hardware concurrency, and screen\n    const memory = navigator?.deviceMemory || 4;\n    const cores = navigator?.hardwareConcurrency || 4;\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator?.userAgent || ''\n    );\n    const pixelRatio = window?.devicePixelRatio || 1;\n    \n    // Update device capabilities\n    deviceCapabilitiesRef.current = {\n      isHighPerformance: memory > 4 && cores > 4 && !isMobile,\n      isMobile,\n      pixelRatio: Math.min(pixelRatio, isMobile ? 2 : 3) // Cap pixel ratio to avoid excessive rendering\n    };\n    \n    // Calculate quality factor based on capabilities\n    if (adaptiveQuality) {\n      // Base score from hardware\n      const performanceScore = (memory * cores) / (isMobile ? 2 : 1);\n      \n      // Scale quality based on performance score\n      let quality = 1;\n      \n      if (performanceScore > 16) {\n        quality = 1; // High-end devices\n      } else if (performanceScore > 8) {\n        quality = 0.8; // Mid-range devices\n      } else if (performanceScore > 4) {\n        quality = 0.6; // Low-end devices\n      } else {\n        quality = 0.4; // Very low-end devices\n      }\n      \n      setQualityFactor(quality);\n    }\n  }, [adaptiveQuality]);\n  \n  // Detect reduced motion preference\n  useEffect(() => {\n    const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setPrefersReducedMotion(reducedMotionQuery.matches);\n    \n    const handleReducedMotionChange = (e) => {\n      setPrefersReducedMotion(e.matches);\n    };\n    \n    reducedMotionQuery.addEventListener('change', handleReducedMotionChange);\n    \n    // Detect device capabilities\n    detectCapabilities();\n    \n    // Setup visibility change detection\n    const handleVisibilityChange = () => {\n      isVisibleRef.current = !document.hidden;\n    };\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    \n    return () => {\n      reducedMotionQuery.removeEventListener('change', handleReducedMotionChange);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [detectCapabilities]);\n  \n  // Initialize canvas with proper resolution\n  const setupCanvas = useCallback(() => {\n    if (!canvasRef.current || !containerRef.current) return false;\n    \n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    const rect = container.getBoundingClientRect();\n    const pixelRatio = deviceCapabilitiesRef.current.pixelRatio;\n    \n    // Set canvas size accounting for pixel ratio\n    const displayWidth = Math.floor(rect.width);\n    const displayHeight = Math.floor(rect.height);\n    \n    canvas.width = displayWidth * pixelRatio;\n    canvas.height = displayHeight * pixelRatio;\n    \n    // Set CSS display size\n    canvas.style.width = `${displayWidth}px`;\n    canvas.style.height = `${displayHeight}px`;\n    \n    // Get 2D context\n    const ctx = canvas.getContext('2d', {\n      alpha: true,\n      desynchronized: true,\n      willReadFrequently: false\n    });\n    \n    if (!ctx) return false;\n    \n    // Scale context for high-DPI displays\n    ctx.scale(pixelRatio, pixelRatio);\n    \n    // Configure context for high-quality rendering\n    if (adaptedSettings.useHighQualityRendering) {\n      ctx.imageSmoothingEnabled = true;\n      ctx.imageSmoothingQuality = 'high';\n    }\n    \n    ctxRef.current = ctx;\n    \n    // Update dimensions state\n    setDimensions({\n      width: displayWidth,\n      height: displayHeight\n    });\n    \n    return true;\n  }, [adaptedSettings.useHighQualityRendering]);\n  \n  // Initialize star field\n  const initializeStars = useCallback(() => {\n    const { width, height } = dimensions;\n    if (!width || !height) return;\n    \n    const stars = [];\n    \n    // Create stars\n    for (let i = 0; i < adaptedSettings.starCount; i++) {\n      const x = Math.random() * width;\n      const y = Math.random() * height;\n      const size = Math.random() * (adaptedSettings.starMaxSize - adaptedSettings.starMinSize) + adaptedSettings.starMinSize;\n      const opacity = Math.random() * (starMaxOpacity - starMinOpacity) + starMinOpacity;\n      const pulseSpeed = Math.random() * 0.0007 + 0.0003;\n      const pulsePhase = Math.random() * Math.PI * 2;\n      \n      // Add drift motion\n      const driftX = (Math.random() - 0.5) * stellarDriftSpeed;\n      const driftY = (Math.random() - 0.5) * stellarDriftSpeed;\n      \n      // Add z-depth for parallax effect\n      const zDepth = Math.random() * 0.8 + 0.2; // 0.2 to 1.0\n      \n      stars.push({\n        x,\n        y,\n        size,\n        opacity,\n        pulseSpeed,\n        pulsePhase,\n        driftX,\n        driftY,\n        zDepth,\n        originalX: x,\n        originalY: y,\n        // Pre-allocate current properties to avoid layout thrashing\n        currentSize: size,\n        currentOpacity: opacity\n      });\n    }\n    \n    starsRef.current = stars;\n    \n    // Create constellations\n    initializeConstellations(stars);\n  }, [\n    dimensions,\n    adaptedSettings.starCount,\n    adaptedSettings.starMinSize,\n    adaptedSettings.starMaxSize,\n    starMinOpacity,\n    starMaxOpacity,\n    stellarDriftSpeed\n  ]);\n  \n  // Initialize constellations based on stars\n  const initializeConstellations = useCallback((stars) => {\n    const constellations = [];\n    const { width, height } = dimensions;\n    \n    // Get a subset of stars to use for constellations\n    const constellationStars = [...stars]\n      .sort(() => Math.random() - 0.5)\n      .slice(0, Math.floor(stars.length * constellationDensity));\n    \n    // Create constellations\n    for (let i = 0; i < adaptedSettings.constellationCount; i++) {\n      // Select random stars for this constellation\n      const starCount = Math.floor(Math.random() * 6) + 3; // 3-8 stars per constellation\n      const constellationPoints = [];\n      \n      // Get random starting point\n      const startIndex = Math.floor(Math.random() * constellationStars.length);\n      let currentStarIndex = startIndex;\n      \n      // Add the first star\n      const firstStar = constellationStars[currentStarIndex];\n      constellationPoints.push({\n        x: firstStar.x,\n        y: firstStar.y,\n        starRef: firstStar\n      });\n      \n      // Add connections by finding stars that are reasonably close\n      for (let j = 1; j < starCount; j++) {\n        const currentStar = constellationStars[currentStarIndex];\n        \n        // Find nearby stars\n        const nearbyStars = constellationStars.filter((star, index) => {\n          if (index === currentStarIndex) return false; // Skip current star\n          \n          // Check if star is already in constellation\n          const isAlreadyIncluded = constellationPoints.some(point => point.starRef === star);\n          if (isAlreadyIncluded) return false;\n          \n          // Calculate distance\n          const dx = star.x - currentStar.x;\n          const dy = star.y - currentStar.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          \n          // Find stars within a reasonable distance\n          const maxDistance = Math.min(width, height) * 0.2;\n          return distance < maxDistance;\n        });\n        \n        // If no nearby stars, break constellation here\n        if (nearbyStars.length === 0) break;\n        \n        // Choose a random nearby star\n        const nextStar = nearbyStars[Math.floor(Math.random() * nearbyStars.length)];\n        const nextStarIndex = constellationStars.indexOf(nextStar);\n        \n        // Add to constellation\n        constellationPoints.push({\n          x: nextStar.x,\n          y: nextStar.y,\n          starRef: nextStar\n        });\n        \n        // Update current star\n        currentStarIndex = nextStarIndex;\n      }\n      \n      // Only add constellations with enough points\n      if (constellationPoints.length >= 3) {\n        // Calculate center of constellation for rotation\n        const centerX = constellationPoints.reduce((sum, p) => sum + p.x, 0) / constellationPoints.length;\n        const centerY = constellationPoints.reduce((sum, p) => sum + p.y, 0) / constellationPoints.length;\n        \n        constellations.push({\n          points: constellationPoints,\n          opacity: Math.random() * 0.1 + constellationLineOpacity - 0.1,\n          rotation: (Math.random() * 0.0002 - 0.0001) * (Math.random() < 0.5 ? -1 : 1), // Random direction\n          rotationCenter: { x: centerX, y: centerY },\n          // Pre-allocate current property to avoid layout thrashing\n          currentOpacity: constellationLineOpacity\n        });\n      }\n    }\n    \n    constellationsRef.current = constellations;\n  }, [\n    adaptedSettings.constellationCount,\n    constellationDensity,\n    constellationLineOpacity,\n    dimensions\n  ]);\n  \n  // Update stars and constellations on resize\n  useEffect(() => {\n    if (!dimensions.width || !dimensions.height) return;\n    \n    // Initialize stars and constellations\n    initializeStars();\n    \n    // Mark component as initialized\n    setInitialized(true);\n  }, [dimensions, initializeStars]);\n  \n  // Setup canvas resize observer\n  useEffect(() => {\n    if (!containerRef.current) return;\n    \n    // Create a ResizeObserver to detect container size changes\n    const resizeObserver = new ResizeObserver(entries => {\n      // Debounce resize operations\n      if (resizeObserverRef.current?.timeout) {\n        clearTimeout(resizeObserverRef.current.timeout);\n      }\n      \n      resizeObserverRef.current = {\n        ...resizeObserverRef.current,\n        timeout: setTimeout(() => {\n          setupCanvas();\n        }, 200) // 200ms debounce\n      };\n    });\n    \n    // Capture current reference to avoid closure issues in cleanup\n    const currentContainer = containerRef.current;\n    \n    // Start observing the container\n    resizeObserver.observe(currentContainer);\n    resizeObserverRef.current = { \n      ...resizeObserverRef.current,\n      observer: resizeObserver \n    };\n    \n    // Initial setup\n    setupCanvas();\n    \n    return () => {\n      if (resizeObserverRef.current?.observer) {\n        resizeObserverRef.current.observer.disconnect();\n      }\n      if (resizeObserverRef.current?.timeout) {\n        clearTimeout(resizeObserverRef.current.timeout);\n      }\n    };\n  }, [setupCanvas]);\n  \n  // Update star positions and properties\n  const updateStars = useCallback((deltaTime, timestamp) => {\n    const { width, height } = dimensions;\n    \n    // Calculate global drift based on time\n    const globalOffsetX = Math.sin(timestamp * backgroundMotionSpeed) * width * 0.05;\n    const globalOffsetY = Math.cos(timestamp * backgroundMotionSpeed) * height * 0.05;\n    \n    // Update each star\n    starsRef.current.forEach(star => {\n      // Apply global movement with parallax effect based on z-depth\n      const parallaxFactor = star.zDepth; \n      \n      // Update position with smooth motion\n      star.x = star.originalX + globalOffsetX * parallaxFactor + Math.sin(timestamp * 0.0001 + star.pulsePhase) * 2;\n      star.y = star.originalY + globalOffsetY * parallaxFactor + Math.cos(timestamp * 0.0001 + star.pulsePhase) * 2;\n      \n      // Wrap around edges (with buffer zone to prevent popping)\n      if (star.x < -20) star.x = width + 20;\n      if (star.x > width + 20) star.x = -20;\n      if (star.y < -20) star.y = height + 20;\n      if (star.y > height + 20) star.y = -20;\n      \n      // Update pulse effect - use modulo to ensure continuous animation\n      const pulseTime = (timestamp % starPulseDuration) / starPulseDuration;\n      const pulseValue = Math.sin(pulseTime * Math.PI * 2 + star.pulsePhase);\n      \n      // Apply subtle pulse to size and opacity\n      star.currentSize = star.size * (1 + pulseValue * 0.2);\n      star.currentOpacity = star.opacity * (0.8 + pulseValue * 0.2);\n    });\n  }, [dimensions, backgroundMotionSpeed, starPulseDuration]);\n  \n  // Update constellation positions\n  const updateConstellations = useCallback((deltaTime, timestamp) => {\n    // Only update if we have constellations\n    if (constellationsRef.current.length === 0) return;\n    \n    // Update each constellation\n    constellationsRef.current.forEach(constellation => {\n      // Apply rotation to each point around constellation center\n      const rotationAmount = constellation.rotation * deltaTime;\n      const centerX = constellation.rotationCenter.x;\n      const centerY = constellation.rotationCenter.y;\n      \n      // Apply subtle unified movement to constellation center\n      const globalPhase = timestamp * 0.0001;\n      const centerDriftX = Math.sin(globalPhase + centerX * 0.01) * 2;\n      const centerDriftY = Math.cos(globalPhase + centerY * 0.01) * 2;\n      \n      constellation.rotationCenter.x += centerDriftX * 0.01;\n      constellation.rotationCenter.y += centerDriftY * 0.01;\n      \n      // Update constellation points based on their reference stars\n      constellation.points.forEach(point => {\n        // Get updated star position from reference\n        point.x = point.starRef.x;\n        point.y = point.starRef.y;\n        \n        // Apply subtle rotation around constellation center\n        const dx = point.x - centerX;\n        const dy = point.y - centerY;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const angle = Math.atan2(dy, dx) + rotationAmount;\n        \n        // Apply rotation with slight drift\n        point.x = centerX + Math.cos(angle) * distance + centerDriftX * 0.05;\n        point.y = centerY + Math.sin(angle) * distance + centerDriftY * 0.05;\n      });\n      \n      // Apply subtle opacity variation based on time\n      constellation.currentOpacity = constellation.opacity * (0.8 + Math.sin(timestamp * 0.0005) * 0.2);\n    });\n  }, []);\n  \n  // Render stars with optimized approach\n  const renderStars = useCallback((ctx, timestamp) => {\n    // Skip if context is not available\n    if (!ctx) return;\n    \n    // Use high-quality or optimized rendering based on device capabilities\n    const useGlow = adaptedSettings.useGlow && !deviceCapabilitiesRef.current.isMobile;\n    \n    // Draw each star\n    starsRef.current.forEach(star => {\n      ctx.beginPath();\n      \n      // Apply glow effect for larger stars to create depth\n      if (useGlow && star.size > adaptedSettings.starMinSize + 0.5) {\n        ctx.shadowBlur = star.currentSize * 3;\n        ctx.shadowColor = getCachedColor(glowStarColor, star.currentOpacity * 0.8);\n      }\n      \n      // Draw star core with gradient for more realistic appearance\n      const gradient = ctx.createRadialGradient(\n        star.x, star.y, 0,\n        star.x, star.y, star.currentSize\n      );\n      \n      gradient.addColorStop(0, getCachedColor(coreStarColor, star.currentOpacity));\n      gradient.addColorStop(0.6, getCachedColor(coreStarColor, star.currentOpacity * 0.8));\n      gradient.addColorStop(1, getCachedColor(glowStarColor, star.currentOpacity * 0.3));\n      \n      ctx.arc(star.x, star.y, star.currentSize, 0, Math.PI * 2);\n      ctx.fillStyle = gradient;\n      ctx.fill();\n      \n      // Clear shadow settings to improve performance\n      if (useGlow && star.size > adaptedSettings.starMinSize + 0.5) {\n        ctx.shadowBlur = 0;\n        ctx.shadowColor = 'transparent';\n      }\n    });\n  }, [\n    adaptedSettings.useGlow, \n    adaptedSettings.starMinSize,\n    getCachedColor, \n    glowStarColor, \n    coreStarColor\n  ]);\n  \n  // Render constellations with optimized approach\n  const renderConstellations = useCallback((ctx, timestamp) => {\n    // Skip if context is not available\n    if (!ctx) return;\n    \n    // Draw each constellation\n    constellationsRef.current.forEach(constellation => {\n      // Draw lines between stars\n      ctx.beginPath();\n      \n      // Move to first point\n      const firstPoint = constellation.points[0];\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      \n      // Connect the dots with smooth lines\n      for (let i = 1; i < constellation.points.length; i++) {\n        const point = constellation.points[i];\n        ctx.lineTo(point.x, point.y);\n      }\n      \n      // Set line style and draw with subtle gradient\n      const gradient = ctx.createLinearGradient(\n        constellation.points[0].x, constellation.points[0].y,\n        constellation.points[constellation.points.length - 1].x, constellation.points[constellation.points.length - 1].y\n      );\n      \n      gradient.addColorStop(0, getCachedColor(constellationLineColor, constellation.currentOpacity));\n      gradient.addColorStop(0.5, getCachedColor(constellationLineColor, constellation.currentOpacity * 1.2));\n      gradient.addColorStop(1, getCachedColor(constellationLineColor, constellation.currentOpacity));\n      \n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 0.7; // Thin lines\n      ctx.lineCap = 'round'; // Rounded ends for smoother appearance\n      ctx.stroke();\n      \n      // Add subtle vertex effects at intersection points\n      if (vertexEffectIntensity > 0) {\n        constellation.points.forEach((point, index) => {\n          // Skip first and last points for better aesthetics\n          if (index === 0 || index === constellation.points.length - 1) return;\n          \n          // Create subtle pulsing vertex glow\n          const vertexSize = 1.5 * vertexEffectIntensity;\n          const pulseOffset = Math.sin(timestamp * 0.001 + index) * 0.2 + 0.8;\n          \n          ctx.beginPath();\n          ctx.arc(point.x, point.y, vertexSize * pulseOffset, 0, Math.PI * 2);\n          \n          // Add subtle glow to vertices\n          if (adaptedSettings.useGlow) {\n            ctx.shadowBlur = vertexSize * 2;\n            ctx.shadowColor = getCachedColor(constellationLineColor, constellation.currentOpacity * 0.8);\n          }\n          \n          // Fill vertex with slightly higher opacity\n          const vertexOpacity = Math.min(1, constellation.currentOpacity * 1.4);\n          ctx.fillStyle = getCachedColor(constellationLineColor, vertexOpacity);\n          ctx.fill();\n          \n          // Clear shadow for performance\n          if (adaptedSettings.useGlow) {\n            ctx.shadowBlur = 0;\n            ctx.shadowColor = 'transparent';\n          }\n        });\n      }\n    });\n  }, [\n    getCachedColor,\n    constellationLineColor,\n    vertexEffectIntensity,\n    adaptedSettings.useGlow\n  ]);\n  \n  // Main animation handler\n  const animateBackground = useCallback((timestamp) => {\n    // Skip animation if component is hidden, inactive, or user prefers reduced motion\n    const shouldAnimate = \n      isVisibleRef.current && \n      active && \n      !(respectReducedMotion && prefersReducedMotion);\n    \n    if (!shouldAnimate) {\n      animationFrameRef.current = requestAnimationFrame(animateBackground);\n      return;\n    }\n    \n    // Calculate delta time for smooth animation\n    const now = timestamp || performance.now();\n    const deltaTime = Math.min(now - lastFrameTimeRef.current, 50); // Cap delta time at 50ms\n    lastFrameTimeRef.current = now;\n    \n    // Calculate time scale based on target frame rate\n    const targetDelta = 1000 / 60; // Target 60 FPS\n    const timeScale = deltaTime / targetDelta;\n    timeScaleRef.current = timeScale;\n    \n    // Skip rendering if canvas context is not available\n    if (!ctxRef.current) {\n      animationFrameRef.current = requestAnimationFrame(animateBackground);\n      return;\n    }\n    \n    // Clear canvas with high-performance clear method\n    ctxRef.current.clearRect(0, 0, dimensions.width, dimensions.height);\n    \n    // Update positions\n    updateStars(deltaTime, now);\n    updateConstellations(deltaTime, now);\n    \n    // Render everything\n    renderStars(ctxRef.current, now);\n    renderConstellations(ctxRef.current, now);\n    \n    // Debug info\n    if (debugMode) {\n      const ctx = ctxRef.current;\n      \n      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n      ctx.font = '12px monospace';\n      ctx.fillText(`Stars: ${starsRef.current.length}`, 10, 20);\n      ctx.fillText(`Constellations: ${constellationsRef.current.length}`, 10, 40);\n      ctx.fillText(`Quality: ${qualityFactor.toFixed(2)}`, 10, 60);\n      ctx.fillText(`Device: ${deviceCapabilitiesRef.current.isMobile ? 'Mobile' : 'Desktop'}`, 10, 80);\n      ctx.fillText(`FPS: ${Math.round(1000 / (deltaTime || 16))}`, 10, 100);\n    }\n    \n    // Request next frame\n    animationFrameRef.current = requestAnimationFrame(animateBackground);\n  }, [\n    active,\n    respectReducedMotion,\n    prefersReducedMotion,\n    dimensions,\n    updateStars,\n    updateConstellations,\n    renderStars,\n    renderConstellations,\n    debugMode,\n    qualityFactor\n  ]);\n  \n  // Start/stop animation loop\n  useEffect(() => {\n    if (!initialized || !dimensions.width || !dimensions.height) return;\n    \n    // Reset timestamp for smooth animation restart\n    lastFrameTimeRef.current = 0;\n    \n    // Start animation loop\n    animationFrameRef.current = requestAnimationFrame(animateBackground);\n    \n    // Cleanup\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [initialized, dimensions, animateBackground]);\n  \n  return (\n    <div\n      ref={containerRef}\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n        zIndex,\n        pointerEvents: 'none',\n        // Use hardware acceleration\n        willChange: 'transform',\n        transform: 'translateZ(0)',\n        backfaceVisibility: 'hidden'\n      }}\n      aria-hidden=\"true\"\n    >\n      <canvas\n        ref={canvasRef}\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          // Hardware acceleration\n          willChange: 'transform',\n          transform: 'translateZ(0)',\n          backfaceVisibility: 'hidden'\n        }}\n      />\n    </div>\n  );\n};\n\nexport default StellarBackground;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}